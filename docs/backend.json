
{
  "entities": {
    "Registration": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Registration",
      "type": "object",
      "description": "Represents a user's registration for a medical camp.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the registration entry."
        },
        "name": {
          "type": "string",
          "description": "The full name of the registrant."
        },
        "age": {
          "type": "number",
          "description": "The age of the registrant."
        },
        "gender": {
          "type": "string",
          "description": "The gender of the registrant."
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the registrant."
        },
        "email": {
          "type": "string",
          "description": "The email address of the registrant.",
          "format": "email"
        },
        "address": {
          "type": "string",
          "description": "The address of the registrant."
        },
        "campLocation": {
          "type": "string",
          "description": "The location of the medical camp the registrant is signing up for."
        },
        "medicalCondition": {
          "type": "string",
          "description": "Details about the registrant's medical condition."
        }
      },
      "required": [
        "id",
        "name",
        "age",
        "gender",
        "phone",
        "email",
        "address",
        "campLocation",
        "medicalCondition"
      ]
    },
    "ContactMessage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactMessage",
      "type": "object",
      "description": "Represents a message submitted through the contact form.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the contact message."
        },
        "name": {
          "type": "string",
          "description": "The name of the person submitting the message."
        },
        "email": {
          "type": "string",
          "description": "The email address of the person submitting the message.",
          "format": "email"
        },
        "message": {
          "type": "string",
          "description": "The content of the message."
        },
        "sentAt": {
          "type": "string",
          "description": "Timestamp indicating when the message was sent.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "message"
      ]
    },
    "MedicalCamp": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MedicalCamp",
      "type": "object",
      "description": "Represents an upcoming medical camp event.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the medical camp."
        },
        "date": {
          "type": "string",
          "description": "The date of the medical camp.",
          "format": "date-time"
        },
        "location": {
          "type": "string",
          "description": "The location of the medical camp."
        },
        "description": {
          "type": "string",
          "description": "A brief description of the medical camp."
        }
      },
      "required": [
        "id",
        "date",
        "location"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The user's unique ID from Firebase Authentication."
        },
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "username": {
          "type": "string",
          "description": "The user's chosen username."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "phone": {
          "type": "string",
          "description": "The user's phone number."
        },
        "age": {
          "type": "number",
          "description": "The user's age."
        }
      },
      "required": [
        "uid",
        "name",
        "username",
        "email"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/entities/UserProfile"
          },
          "description": "Stores public profile information for users.",
          "params": [
            {
              "name": "userId",
              "description": "The UID of the user."
            }
          ]
        }
      },
      {
        "path": "/registrations/{registrationId}",
        "definition": {
          "entityName": "Registration",
          "schema": {
            "$ref": "#/entities/Registration"
          },
          "description": "Stores user registration data for medical camps.",
          "params": [
            {
              "name": "registrationId",
              "description": "Unique identifier for the registration document."
            }
          ]
        }
      },
      {
        "path": "/contactMessages/{contactMessageId}",
        "definition": {
          "entityName": "ContactMessage",
          "schema": {
            "$ref": "#/entities/ContactMessage"
          },
          "description": "Stores contact messages submitted through the website.",
          "params": [
            {
              "name": "contactMessageId",
              "description": "Unique identifier for the contact message document."
            }
          ]
        }
      },
      {
        "path": "/medicalCamps/{medicalCampId}",
        "definition": {
          "entityName": "MedicalCamp",
          "schema": {
            "$ref": "#/entities/MedicalCamp"
          },
          "description": "Stores information about upcoming medical camps.",
          "params": [
            {
              "name": "medicalCampId",
              "description": "Unique identifier for the medical camp document."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to store data related to medical camps, user registrations, and contact messages. It follows a flat structure with dedicated collections for each entity. This approach simplifies security rules and queries. The `registrations` collection stores user registration data. The `contactMessages` collection stores messages submitted via the contact form. The `medicalCamps` collection stores data about upcoming medical camps. This structure ensures authorization independence because there are no hierarchical dependencies requiring `get()` calls in the security rules. Each collection is independent and secured based on its own data and potentially user authentication (`request.auth.uid` if authentication is required, though in this case, write access to the collections might be limited to authenticated admins).  Since there are no role based access controls the rules will need to be simple."
  }
}
